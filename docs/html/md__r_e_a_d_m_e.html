<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TurtleBot Roomba: TurtleBot_Roomba</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TurtleBot Roomba
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A simple walker turtlebot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TurtleBot_Roomba </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A simple turtleBot3 walker algorithm much like a Roomba robot vacuum cleaner. The robot moves forward until it reaches an obstacle (but does not collide), then rotates in place until the way ahead is clear, then move forward again and repeat.</p>
<p><a href="https://opensource.org/licenses/BSD-3-Clause"></a></p>
<h2>Overview</h2>
<p>TurtleBot_Roomba is a turtleBot3-based robot that moves like a Roomba robot. It can move in any environment while avoiding static and dynamic obstacles. The robot continuously scans it environment for obstacles and if it encounters an obstacle it rotates at it place in a direction that would make its orientation away from the obstacle until there is no obstacle.</p>
<p>The **<code>turtlebot_roomba_node</code>** subscribes to the **<code>\scan</code>** topic which provides it with the laser scan data (distances of obstacles from the robot) and based on the distances it publishes velocity commands on **<code>\cmd_vel</code>**</p>
<h1>Dependencies</h1>
<ul>
<li>Ubuntu 18.04 (LTS)</li>
<li>ROS Melodic</li>
<li>ROS TurtleBot3 Package</li>
<li>Gazebo</li>
</ul>
<h2>Build Instructions</h2>
<ul>
<li>Create a workspace <div class="fragment"><div class="line">mkdir -p ~/roomba_ws/src</div><div class="line">cd ~/roomba_ws/src</div></div><!-- fragment --></li>
<li>Clone the repository inside the src directory of the workspace <div class="fragment"><div class="line">git clone https://github.com/mjoshi07/turtlebot_roomba.git</div></div><!-- fragment --></li>
<li>Build the workspace <div class="fragment"><div class="line">cd ~/roomba_ws</div><div class="line">catkin_make </div><div class="line">source devel/setup.bash</div></div><!-- fragment --></li>
</ul>
<p>## Install TurtleBot3 </p><div class="fragment"><div class="line">cd ~/roomba_ws/src</div><div class="line">git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git</div><div class="line">git clone https://github.com/ROBOTIS-GIT/turtlebot3.git</div><div class="line">cd ~/roomba_ws</div><div class="line">catkin_make</div><div class="line">source devel/setup.bash</div></div><!-- fragment --><ul>
<li>Set turtlebot environment variable in .bashrc <div class="fragment"><div class="line">echo &quot;export TURTLEBOT3_MODEL=waffle_pi&quot; &gt;&gt; ~/.bashrc</div></div><!-- fragment --></li>
</ul>
<h2>Run Instructions</h2>
<p>### Launch everything with launch file, by default record_rosbag argument is set to false </p><div class="fragment"><div class="line">roslaunch turtlebot_roomba turtlebot_roomba.launch</div></div><!-- fragment --><ul>
<li>enable the record_rosbag argument and it wil record a rosbag for 30 seconds and save rosbag file in the results directory <div class="fragment"><div class="line">roslaunch turtlebot_roomba turtlebot_roomba.launch record_rosbag:=true</div></div><!-- fragment --> **<code>NOTE</code>** - rosbag will <b>NOT</b> record any messages published at <code>/camera</code> topic</li>
</ul>
<h3>Run with rosrun</h3>
<ul>
<li>open a new terminal <div class="fragment"><div class="line">cd ~/roomba_ws</div><div class="line">source devel/setup.bash</div><div class="line">roslaunch turtleBot3_gazebo turtleBot3_world.launch</div></div><!-- fragment --></li>
<li>open a new terminal <div class="fragment"><div class="line">cd ~/roomba_ws</div><div class="line">source devel/setup.bash</div><div class="line">rosrun turtlebot_roomba turtlebot_roomba_node</div></div><!-- fragment --> <h2>Set ROS logger level</h2>
</li>
</ul>
<ul>
<li>while turtlebot_roomba_node is running <div class="fragment"><div class="line">rosservice call /turtlebot_roomba/set_logger_level &quot;{logger: &#39;rosout&#39;, level: &#39;debug&#39;}&quot;</div></div><!-- fragment --></li>
</ul>
<h2>Rosbag details</h2>
<ul>
<li>set the launch_gazebo flag to false in the launch command, assuming rosbag file was recorded <div class="fragment"><div class="line">roslaunch turtlebot_roomba turtlebot_roomba.launch launch_gazebo:=false </div></div><!-- fragment --></li>
<li>check the recorded ros bag <div class="fragment"><div class="line">rosbag info rosbag_topics_record_2021-11-27-01-45-21.bag </div></div><!-- fragment --></li>
<li>you should see something like this, check there should be no topic /camera <div class="fragment"><div class="line">path:        rosbag_topics_record_2021-11-27-01-45-21.bag</div><div class="line">version:     2.0</div><div class="line">duration:    30.0s</div><div class="line">start:       Dec 31 1969 19:00:00.17 (0.17)</div><div class="line">end:         Dec 31 1969 19:00:30.14 (30.14)</div><div class="line">size:        48.8 MB</div><div class="line">messages:    126159</div><div class="line">compression: none [64/64 chunks]</div><div class="line">types:       dynamic_reconfigure/Config            [958f16a05573709014982821e6822580]</div><div class="line">             dynamic_reconfigure/ConfigDescription [757ce9d44ba8ddd801bb30bc456f946f]</div><div class="line">             gazebo_msgs/LinkStates                [48c080191eb15c41858319b4d8a609c2]</div><div class="line">             gazebo_msgs/ModelStates               [48c080191eb15c41858319b4d8a609c2]</div><div class="line">             geometry_msgs/Twist                   [9f195f881246fdfa2798d1d3eebca84a]</div><div class="line">             nav_msgs/Odometry                     [cd5e73d190d741a2f92e81eda573aca7]</div><div class="line">             rosgraph_msgs/Clock                   [a9c97c1d230cfc112e270351a944ee47]</div><div class="line">             rosgraph_msgs/Log                     [acffd30cd6b6de30f120938c17c593fb]</div><div class="line">             sensor_msgs/Imu                       [6a62c6daae103f4ff57a132d6f95cec2]</div><div class="line">             sensor_msgs/JointState                [3066dcd76a6cfaef579bd0f34173e9fd]</div><div class="line">             sensor_msgs/LaserScan                 [90c7ef2dc6895d81024acba2ac42f369]</div><div class="line">             tf2_msgs/TFMessage                    [94810edda583a504dfda3829e70d7eec]</div><div class="line">topics:      /clock                           29963 msgs    : rosgraph_msgs/Clock                  </div><div class="line">             /cmd_vel                           149 msgs    : geometry_msgs/Twist                  </div><div class="line">             /gazebo/link_states              29877 msgs    : gazebo_msgs/LinkStates               </div><div class="line">             /gazebo/model_states             29874 msgs    : gazebo_msgs/ModelStates              </div><div class="line">             /gazebo/parameter_descriptions       1 msg     : dynamic_reconfigure/ConfigDescription</div><div class="line">             /gazebo/parameter_updates            1 msg     : dynamic_reconfigure/Config           </div><div class="line">             /imu                             26413 msgs    : sensor_msgs/Imu                      </div><div class="line">             /joint_states                      897 msgs    : sensor_msgs/JointState               </div><div class="line">             /odom                              897 msgs    : nav_msgs/Odometry                    </div><div class="line">             /rosout                           3525 msgs    : rosgraph_msgs/Log                     (4 connections)</div><div class="line">             /rosout_agg                       3516 msgs    : rosgraph_msgs/Log                    </div><div class="line">             /scan                              149 msgs    : sensor_msgs/LaserScan                </div><div class="line">             /tf                                897 msgs    : tf2_msgs/TFMessage</div></div><!-- fragment --></li>
<li>play the recorded ros bag <div class="fragment"><div class="line">rosbag play rosbag_topics_record_2021-11-27-01-45-21.bag</div></div><!-- fragment --></li>
<li>verify this by running the rqt graph <div class="fragment"><div class="line">rqt_graph</div></div><!-- fragment --></li>
<li>you should see something like this <div class="image">
<img src="https://github.com/mjoshi07/turtlebot_roomba/blob/Week13_HW/results/rosbag_verified.png" alt="image"/>
</div>
 </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
